name: gcc_linux

on: [push, pull_request]

jobs:
  linux_gcc:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: lukka/get-cmake@v3.19.0
    - name: Download Dependencies
      run: |
        sudo apt-get install -y build-essential pkg-config gcc-10 g++-10 xorg-dev libglu1-mesa-dev libopenal-dev libvulkan-dev wget
        wget https://sdk.lunarg.com/sdk/download/1.2.176.1/linux/vulkansdk-linux-x86_64-1.2.176.1.tar.gz
        tar -xf vulkansdk-linux-x86_64-1.2.176.1.tar.gz
        cd 1.2.176.1
        ./vulkansdk
        sh setup-env.sh
    - name: Build
      env:
        CC: gcc-10
        CXX: g++-10
        LD_LIBRARY_PATH: /usr/bin/g++-10/lib
      run: |
        cmake --version
        ninja --version
        cmake -B Build -GNinja -DCMAKE_BUILD_TYPE=Release
        cmake --build Build